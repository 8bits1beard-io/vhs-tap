<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VHS Tap - VHS Collection Manager</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Logo Branding -->
        <div class="header-logo">
            <img src="/logo.png" alt="VHS Tap" class="mr-movies-logo-img">
        </div>

        <div class="retro-banner">üìº VHS Collection Manager</div>

        <header>
            <h1>üé¨ Admin Panel</h1>
            <p>Manage your NFC-enabled VHS tape collection</p>
        </header>

        <div class="stats">
            <div class="stat-card">
                <h3 id="totalTapes">0</h3>
                <p>Total VHS Tapes</p>
            </div>
            <div class="stat-card">
                <h3 id="totalScans">0</h3>
                <p>Total Scans</p>
            </div>
        </div>

        <section class="actions">
            <button class="btn btn-primary" onclick="showAddTapeModal()">+ Add New VHS Tape</button>
            <button class="btn btn-secondary" onclick="refreshTapes()">üîÑ Refresh</button>
        </section>

        <section class="tapes-section">
            <h2>VHS Tapes</h2>
            <div id="tapesList" class="tapes-grid">
                <p class="loading">Loading tapes...</p>
            </div>
        </section>

        <!-- Footer with retro messaging -->
        <div class="footer">
            <div class="rewind-message">‚è™ Be Kind, Rewind ‚è™</div>
        </div>
    </div>

    <!-- Add/Edit Tape Modal -->
    <div id="tapeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Add New VHS Tape</h2>

            <form id="tapeForm">
                <input type="hidden" id="tapeId" name="tapeId">

                <div class="form-group">
                    <label for="token">NFC Token *</label>
                    <input type="text" id="token" name="token" required placeholder="e.g., VHS-001">
                    <small>This is the unique identifier for your NFC tag</small>
                </div>

                <div class="form-group">
                    <label for="movieSearch">Search Jellyfin Movies</label>
                    <input type="text" id="movieSearch" placeholder="Search for a movie...">
                    <div id="movieResults" class="movie-results"></div>
                </div>

                <div class="form-group">
                    <label for="movie_id">Movie ID *</label>
                    <input type="text" id="movie_id" name="movie_id" required readonly>
                </div>

                <div class="form-group">
                    <label for="movie_title">Movie Title *</label>
                    <input type="text" id="movie_title" name="movie_title" required>
                </div>

                <div class="form-group">
                    <label for="movie_year">Year</label>
                    <input type="number" id="movie_year" name="movie_year" min="1900" max="2100">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save VHS Tape</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Test Scan Modal -->
    <div id="scanModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeScanModal()">&times;</span>
            <h2>Test NFC Scan</h2>

            <div id="scanResult" class="scan-result"></div>

            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeScanModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
